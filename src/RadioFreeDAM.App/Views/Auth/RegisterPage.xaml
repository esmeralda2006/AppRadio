<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:auth="clr-namespace:RadioFreeDAM.App.ViewModels.Auth"
             x:Class="RadioFreeDAM.App.Views.Auth.RegisterPage"
             x:DataType="auth:RegisterViewModel"
             Title="Registro"
             Shell.NavBarIsVisible="False">
    
    <ScrollView>
        <VerticalStackLayout Padding="30" Spacing="20" VerticalOptions="Center">
            
            <Label 
                Text="Crear Cuenta"
                Style="{StaticResource HeaderLabel}"
                Margin="0,0,0,30"/>
            
            <Label Text="Nombre de Usuario" Style="{StaticResource SecondaryLabel}" Margin="5,0"/>
            <Frame Style="{StaticResource DarkFrame}">
                <Entry 
                    Text="{Binding Username}"
                    Placeholder="Tu nombre"
                    Style="{StaticResource DarkEntry}"/>
            </Frame>
            
            <Label Text="Email" Style="{StaticResource SecondaryLabel}" Margin="5,0"/>
            <Frame Style="{StaticResource DarkFrame}">
                <Entry 
                    Text="{Binding Email}"
                    Placeholder="email@ejemplo.com"
                    Keyboard="Email"
                    Style="{StaticResource DarkEntry}"/>
            </Frame>
            
            <Label Text="ContraseÃ±a" Style="{StaticResource SecondaryLabel}" Margin="5,0"/>
            <Frame Style="{StaticResource DarkFrame}">
                <Grid ColumnDefinitions="*,Auto">
                    <Entry 
                        Grid.Column="0"
                        Text="{Binding Password}"
                        Placeholder="********"
                        IsPassword="{Binding IsPasswordMasked}"
                        Style="{StaticResource DarkEntry}"/>
                    <Button
                        Grid.Column="1"
                        Text="ðŸ‘"
                        FontSize="18"
                        Padding="10,0"
                        BackgroundColor="Transparent"
                        TextColor="{StaticResource TextGray}"
                        Command="{Binding TogglePasswordCommand}"
                        WidthRequest="40"
                        HeightRequest="40"/>
                </Grid>
            </Frame>
            
            <ActivityIndicator 
                IsRunning="{Binding IsLoading}"
                IsVisible="{Binding IsLoading}"
                Color="{StaticResource Primary}"
                HorizontalOptions="Center"/>

            <Button 
                Text="Registrarse"
                Style="{StaticResource PrimaryButton}"
                Margin="0,20,0,0"
                Command="{Binding RegisterCommand}"
                IsEnabled="{Binding IsLoading, Converter={StaticResource InvertedBoolConverter}}"/>
            
            <HorizontalStackLayout HorizontalOptions="Center" Spacing="5" Margin="0,20,0,0">
                <Label 
                    Text="Â¿Ya tienes cuenta?"
                    Style="{StaticResource SecondaryLabel}"/>
                <Label 
                    Text="Inicia sesiÃ³n"
                    TextColor="{StaticResource Primary}"
                    FontSize="14"
                    FontAttributes="Bold">
                    <Label.GestureRecognizers>
                        <TapGestureRecognizer Command="{Binding GoToLoginCommand}"/>
                    </Label.GestureRecognizers>
                </Label>
            </HorizontalStackLayout>
            
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
